{"version":3,"sources":["index.js"],"names":["koa","require","route","app","fs","setEncoding","use","get","ctx","next","ts","body","console","log","content","headers","query","writeFile","str","readFile","header","cookies","set","post","throw","aa","listen"],"mappings":";;AAMA;;;;AALA,MAAMA,MAAMC,QAAQ,KAAR,CAAZ;AACA,MAAMC,QAAQD,QAAQ,WAAR,CAAd;AACA,MAAME,MAAM,IAAIH,GAAJ,EAAZ;AACA;AACA,MAAMI,KAAKH,QAAQ,eAAR,EAAyBG,EAApC;;AAGAA,GAAGC,WAAH,CAAe,MAAf;;AAGAF,IAAIG,GAAJ,CAAQJ,MAAMK,GAAN,CAAU,KAAV;AAAA,+BAAiB,WAAOC,GAAP,EAAqBC,IAArB,EAA8B;AACrDD,QAAIE,EAAJ,GAAS,CAAT;AACF;;AAEEF,QAAIG,IAAJ,GAAW,eAAX;AACA,UAAMF,MAAN;AACAG,YAAQC,GAAR,CAAY,OAAOL,IAAIG,IAAvB;AACA,QAAK,OAAOH,IAAIG,IAAX,IAAmB,QAAxB,EAAkC;AAAC,YAAM,GAAN;AAAW;AAC9CH,QAAIG,IAAJ,IAAY,uBAAZ;AACA;AACD,GAVO;;AAAA;AAAA;AAAA;AAAA,KAAR;AAWAR,IAAIG,GAAJ,CAAQJ,MAAMK,GAAN,CAAU,GAAV;AAAA,gCAAe,WAAOC,GAAP,EAAqBC,IAArB,EAA8B;AACnD,UAAMK,UAAW;IAAA,CACf,mBAAON,IAAIO,OAAX,CAAoB;;IAAA,CAEpB,mBAAOP,IAAIQ,KAAX,CAAkB,GAHpB;AAIAR,QAAIG,IAAJ,GAAWG,OAAX;AACAV,OAAGa,SAAH,CAAa,qBAAS,MAAT,CAAb,EAA+BH,OAA/B;AACD,GAPO;;AAAA;AAAA;AAAA;AAAA,KAAR;AAQAX,IAAIG,GAAJ,CAAQJ,MAAMK,GAAN,CAAU,OAAV;AAAA,gCAAmB,WAAOC,GAAP,EAAqBC,IAArB,EAA8B;AACvD,UAAMS,MAAM,MAAMd,GAAGe,QAAH,CAAY,qBAAS,MAAT,CAAZ,CAAlB;AACAX,QAAIG,IAAJ,GAAWO,GAAX;AACD,GAHO;;AAAA;AAAA;AAAA;AAAA,KAAR;;AAKAf,IAAIG,GAAJ,CAASJ,MAAMK,GAAN,CAAU,KAAV;AAAA,gCAAiB,WAAMC,GAAN,EAAoBC,IAApB,EAA6B;AACrDG,YAAQC,GAAR,CAAY,OAAOL,IAAIY,MAAvB;AACAR,YAAQC,GAAR,CAAYL,IAAIY,MAAhB;AACAZ,QAAIa,OAAJ,CAAYC,GAAZ,CAAgB,OAAhB,EAAyB,aAAzB;AACAd,QAAIG,IAAJ,GAAWH,IAAIY,MAAf;AACD,GALQ;;AAAA;AAAA;AAAA;AAAA,KAAT;;AAOAjB,IAAIG,GAAJ,CAASJ,MAAMqB,IAAN,CAAW,MAAX;AAAA,gCAAmB,WAAMf,GAAN,EAAoBC,IAApB,EAA6B;AACvDG,YAAQC,GAAR,CAAY,OAAOL,IAAIY,MAAvB;AACAR,YAAQC,GAAR,CAAYL,IAAIY,MAAhB;AACAZ,QAAIG,IAAJ,GAAWH,IAAIY,MAAf;AACD,GAJQ;;AAAA;AAAA;AAAA;AAAA,KAAT;;AAMAjB,IAAIG,GAAJ,CAASJ,MAAMK,GAAN,CAAU,KAAV;AAAA,gCAAiB,WAAMC,GAAN,EAAoBC,IAApB,EAA6B;AACrDD,QAAIgB,KAAJ,CAAU,GAAV,EAAe,GAAf,EAAoB,EAACC,IAAG,KAAJ,EAApB;AACD,GAFQ;;AAAA;AAAA;AAAA;AAAA,KAAT;;AAIAtB,IAAIuB,MAAJ,CAAW,OAAX","file":"index.js","sourcesContent":["// @flow\nconst koa = require('koa');\nconst route = require('koa-route');\nconst app = new koa();\n//const util = require('util');\nconst fs = require('./utils/fs.js').fs;\nimport { toTmpDir, format } from './utils/tools.js';\nimport type { Context } from 'koa';\nfs.setEncoding('utf8');\n\n\napp.use(route.get('/hi', async (ctx: Context, next) => {\n  ctx.ts = 1;\n//  ctx.ts = '1';\n\n  ctx.body = 'hi<br/> <div>';\n  await next();\n  console.log(typeof ctx.body);\n  if ( typeof ctx.body != 'string') {throw 'e';}\n  ctx.body += '<br/>iam hiend </div>';\n  //const a:number = ctx.ts;\n}));\napp.use(route.get('/', async (ctx: Context, next) => {\n  const content = `\n  ${format(ctx.headers)}\n  \\n\n  ${format(ctx.query)}`;\n  ctx.body = content;\n  fs.writeFile(toTmpDir('wxyz'), content);\n}));\napp.use(route.get('/wxyz', async (ctx: Context, next) => {\n  const str = await fs.readFile(toTmpDir('wxyz'));\n  ctx.body = str;\n}));\n\napp.use( route.get('/hd', async(ctx: Context, next) => {\n  console.log(typeof ctx.header);\n  console.log(ctx.header);\n  ctx.cookies.set('hello', 'iam cookies');\n  ctx.body = ctx.header;\n}));\n\napp.use( route.post('/hd2', async(ctx: Context, next) => {\n  console.log(typeof ctx.header);\n  console.log(ctx.header);\n  ctx.body = ctx.header;\n}));\n\napp.use( route.get('/th', async(ctx: Context, next) => {\n  ctx.throw(400, 400, {aa:'aaa'});\n}));\n\napp.listen('19001');\n"],"sourceRoot":"/home/iamchenxin/project/workout/wxts2/src"}